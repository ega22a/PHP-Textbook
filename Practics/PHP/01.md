Перед началом работы с языком программирования PHP, необходимо настроить среду разработки, а также рабочее окружение. Для этого необходимо произвести настройку вашей операционной системы, а также установить необходимые программы и пакеты.

Для установки среды разработки PHP, ваши устройства должны поддерживать следующие характеристики:

1.  Паравиртуализация в BIOS
2.  Актуальные версии ОС (Windows 10, Windows 11, Ubuntu 22.*, Debian и т.п.)

## Настройка операционной системы Windows

**Важно!!!**  Настройка Windows возможна только на Windows 10 или Windows 11 с обновлениями не ниже 2021 года.

Для настройки Windows, необходимо установить и настроить WSL2 (Windows subsystem for Linux 2). Следуйте следующим шагам:

1.  Открыть терминал от имени администратора;
2.  Ввести команду:
    ```powershell
    wsl --install
    ```
3.  У вас откроется окно установки WSL2, следуйте инструкциям;
4.  После установки WSL2, у вас установится Ubuntu 22.04 LTS. Вам будет предложено создать пользователя и пароль.  **Пароль необходимо запомнить, так как он потребуется для установки программ!**  При вводе пароля, символы не отображаются, но они вводятся;  [![Пример окна настройки Ubuntu 22.04](https://github.com/ega22a/PHP-Textbook/raw/main/assets/imgs/01.png)](https://github.com/ega22a/PHP-Textbook/blob/main/assets/imgs/01.png)

Далее настройки идентичны настройке в  [Linux](#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%BE%D0%B9-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B-linux).

## Настройка операционной системы Linux

Настройка пакетов будет происходить через менеджер пакетов  `apt`. Для начала установим необходимые пакеты, а именно:

1.  PHP 8.* и все необходимые модули;
2.  Базы данных MySQL и SQLite 3;
3.  Composer;
4.  Git;
5.  Node.js и npm.

Для установки пакетов, вам необходимо выполнить следующую команду в терминале:

```bash
$ sudo add-apt-repository ppa:ondrej/php && \
  sudo apt update && sudo apt upgrade -y && \
  sudo apt install -y openssl git curl unzip mysql-server sqlite3 php8.3-{common,cli,bcmath,curl,mbstring,mysql,tokenizer,xml,zip,sqlite3} && \
  curl -sS https://getcomposer.org/installer -o /tmp/composer-setup.php && \
  sudo php /tmp/composer-setup.php --install-dir=/usr/local/bin --filename=composer && \
  curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash - && \
  sudo apt install -y nodejs
```

## Установка среды разработки

Для проведения разработки будет использоваться Visual Studio Code. Для установки, вам необходимо перейти на  [официальный сайт](https://code.visualstudio.com/)  и скачать установщик для вашей ОС.

Для дальнейшей работы с PHP, Laravel, а также проведения тестирования и отладки кода, необходимо установить следующие расширения:

1.  [HTML CSS Support](https://marketplace.visualstudio.com/items?itemName=ecmel.vscode-html-css)
2.  [IntelliCode API Usage Examples](https://marketplace.visualstudio.com/items?itemName=VisualStudioExptTeam.intellicode-api-usage-examples)
3.  [Laravel Artisan](https://marketplace.visualstudio.com/items?itemName=ryannaddy.laravel-artisan)
4.  [Laravel Blade formatter](https://marketplace.visualstudio.com/items?itemName=shufo.vscode-blade-formatter)
5.  [Laravel Blade Snippets](https://marketplace.visualstudio.com/items?itemName=onecentlin.laravel-blade)
6.  [Laravel Blade Spacer](https://marketplace.visualstudio.com/items?itemName=austenc.laravel-blade-spacer)
7.  [Laravel Blade Wrapper](https://marketplace.visualstudio.com/items?itemName=IHunte.laravel-blade-wrapper)
8.  [Laravel Extension Pack](https://marketplace.visualstudio.com/items?itemName=onecentlin.laravel-extension-pack)
9.  [Laravel Extra Intellisense](https://marketplace.visualstudio.com/items?itemName=amiralizadeh9480.laravel-extra-intellisense)
10.  [Laravel goto view](https://marketplace.visualstudio.com/items?itemName=codingyu.laravel-goto-view)
11.  [laravel-goto-components](https://marketplace.visualstudio.com/items?itemName=naoray.laravel-goto-components)
12.  [laravel-jump-controller](https://marketplace.visualstudio.com/items?itemName=pgl.laravel-jump-controller)
13.  [PHP](https://marketplace.visualstudio.com/items?itemName=DEVSENSE.phptools-vscode)
14.  [PHP Debug](https://marketplace.visualstudio.com/items?itemName=xdebug.php-debug)
15.  [PHP Extension Pack](https://marketplace.visualstudio.com/items?itemName=xdebug.php-pack)
16.  [PHP Intelephense](https://marketplace.visualstudio.com/items?itemName=bmewburn.vscode-intelephense-client)
17.  [PHP IntelliSense](https://marketplace.visualstudio.com/items?itemName=zobo.php-intellisense)
18.  [PHP Profiler](https://marketplace.visualstudio.com/items?itemName=DEVSENSE.profiler-php-vscode)

Для более простой установки, вы можете произвести установку через установку пакетного файла. Для этого,  [скачайте данный файл](https://github.com/ega22a/PHP-Textbook/blob/main/assets/files/ntcte-extensions-pack-0.0.1.vsix), а потом произведите установку через команду в терминале (Windows или Linux):
```bash
$ code --install-extension <путь к файлу ntcte-extensions-pack-0.0.1.vsix>
```
После выполнения данной команды, все должно быть установлено.

## Настройка базы данных и установка системы управления базами данных

Для настройки базы данных необходимо произвести следующие настройки:

1. Открыть установленную Ubuntu 22.* в режиме терминала;
2. Ввести поочередно следующие команды:

	```bash
	$ sudo mysql
	$ CREATE USER 'student'@'%' IDENTIFIED BY 'student';
	$ CREATE DATABASE st;
	$ GRANT ALL PRIVILEGES ON st.* TO 'student'@'%';
	$ FLUSH PRIVILEGES;
	$ exit
	```

3.  Вышеприведенной командой был создан пользователь БД с логином  `student`  и паролем  `student`; была создана база данных с именем  `st`; пользователю  `student`  были выданы полные права на работу с БД  `st`.
4.  Установите систему управления базами данных DBeaver. Для этого, перейдите на  [официальный сайт](https://dbeaver.io/download)  и скачайте установщик для вашей ОС.

## Настройка системы управления версиями Git

Для настройки системы управления версиями Git, вам необходимо произвести следующие настройки:

1.  Откройте терминал;
2.  Введите следующие команды:
	```bash
	$ git config --global user.name "Ваше имя"
	$ git config --global user.email "Ваша почта"
	```

# Подключение к рабочей области

> **Примечание:** все действия описываются в Linux-дистрибутиве

Создайте в домашней директории директорию с именем `php-learning`, а в ней создайте директорию `php-1` для данной лабораторной работы:

```bash
$ mkdir -p ~/php-learning/php-1
```

После создания данной директории необходимо открыть Visual Studio Code в данной директории. Для этого действия введите команду:

```bash
$ code ~/php-learning/php-1
```

После данного действия у вас должно открыться окно Visual Studio Code в указанной директории:

![Изображение пустой рабочей области Visual Studio Code](https://raw.githubusercontent.com/ega22a/PHP-Textbook/refs/heads/main/assets/imgs/03.png)

Создадим пустой файл с наименованием `index.php`, а в нем мы пропишем нижеприведенный код:

```php+html
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Моя первая страница на PHP!</title>
  </head>
  <body>
    <?php
      print('Привет, Мир!');
    ?>
  </body>
</html>
```

Остается понять как теперь запустить данный исходный код. Если эту страницу просто передать напрямую в браузер, то браузер пропарсит HTML, но PHP выведется "сырым" текстом, т.к. браузер не занимается компиляцией исходного кода PHP. PHP -- это интерпретируемый серверный язык программирования, для его интерпретации необходимо программное обеспечение --- веб-сервер. Также, веб-сервер обязан поддерживать интерпретацию языка PHP и это тоже необходимо предварительно настроить.

На данный момент нам не нужно настраивать целый веб-сервер для проверки работоспособности созданного исходного кода, нам вполне достаточно использовать встроенный веб-сервер, входящий в комплект поставки модуля PHP: `php-cli`. Для запуска веб-сервера тестирования PHP необходимо ввести в терминале, у которого назначена рабочая область -- директория с проектом. Введите в директории нижеприведенную команду, которая запустит локальный веб-сервер с возможностью интерпретации исходного кода PHP:

```bash
$ php -S localhost:8000
```

При благоприятном стечении обстоятельств, Visual Studio Code должен выглядеть примерно так:

![Изображение Visual Studio Code с запущенным процессом локального веб-сервера модуля php-cli](https://raw.githubusercontent.com/ega22a/PHP-Textbook/refs/heads/main/assets/imgs/04.png)

Запущенный процесс запущен в активном непрерывном процессе и сейчас ожидает подключения со стороны веб-браузера. Данный веб-сервер, как это и полагается ответственному веб-серверу, ожидает запросы по протоколу HTTP на порту 8000. Для открытия в браузере нашей созданной страницы, перейдите в браузере по адресу: http://localhost:8000. В браузере мы увидим, как сервер обработал PHP-код на сервере и отдал нам подготовленный HTML-код:

![Изображение браузера с готовым веб-приложением](https://raw.githubusercontent.com/ega22a/PHP-Textbook/refs/heads/main/assets/imgs/05.png)

Если мы посмотрим на лог обработки веб-сервером, то увидим что-то наподобие:

```log
[Wed Jan 15 21:59:48 2025] PHP 8.3.15 Development Server (http://localhost:8000) started
[Wed Jan 15 21:59:50 2025] 127.0.0.1:34634 Accepted
[Wed Jan 15 21:59:50 2025] 127.0.0.1:34636 Accepted
[Wed Jan 15 21:59:50 2025] 127.0.0.1:34634 [200]: GET /
[Wed Jan 15 21:59:50 2025] 127.0.0.1:34634 Closing
[Wed Jan 15 21:59:50 2025] 127.0.0.1:34636 [404]: GET /favicon.ico - No such file or directory
[Wed Jan 15 21:59:50 2025] 127.0.0.1:34636 Closing
```

# Первая обрабатывающая программа

Давайте создадим что-то захватывающее. В рабочей директории создадим файл с именем `greetings.php` и пропишем в файле нижеприведенный код:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Приветствие</title>
</head>
<body>
  <h1>Приветствие</h1>
  <p>Просто файл, который хочет быть добродушным!</p>
  <form method="POST">
      <input type="text" name="name" placeholder="Введите ваше имя">
      <input type="submit" value="Отправить">
  </form>
</body>
</html>
```

И откроем данный файл по ссылке http://localhost:8000/greetings.php. Если все успешно, то вы увидите форму, которая так и жаждет, чтобы вы ввели данные о себе:

![Страница с готовой формой](https://raw.githubusercontent.com/ega22a/PHP-Textbook/refs/heads/main/assets/imgs/06.png)

Но, как бы вы ни старались нажать на кнопку "Отправить", ничего не происходит. На это есть веская причина: нет никакого исходного кода PHP, который бы обрабатывал данную форму. Давайте же исправим это и расширим нашу функциональность! После HTML-кода формы давайте введем нижеприведенный PHP-код:

```php
<?php
  if (isset($_POST['name'])) {
    print('Привет, ' . $_POST['name']);
  }
?>
```

Пока сильно вдаваться в подробности не будем, просто примем к факту, что есть такой код. После того, как мы его пропишем, запустим в веб-браузере файл `greetings.php`, введем в форму наше имя и нажмем на кнопку "Отправить", мы увидим, что страница изменяется при отправке формы:

![Изображение обработанной страницы](https://raw.githubusercontent.com/ega22a/PHP-Textbook/refs/heads/main/assets/imgs/07.png)

**Важно понимать, что данное действие и изменение страницы происходит не на компьютере клиента, а на сервере.** После нажатия на кнопку "Отправить", данные отправляются на сервер, обрабатываются сервером и отправляется измененная страница клиенту. После отправки формы, сервер "забывает" о состоянии страницы у клиента и если мы перезагрузим страницу в веб-браузере, то страница сбросит своё значение на первоначальное.

# Переменные PHP

Переменные - это «контейнеры» для хранения информации.

## Создание (объявление) переменных в PHP

В PHP переменная начинается со знака `$`, за которым следует имя переменной:

```php
$x = 5;
$name = 'John';
```

В приведенном выше примере переменная `$x` будет иметь значение 5, а переменная `$name` - значение «Джон».

> **Примечание:** Когда вы присваиваете переменной текстовое значение, заключите его в кавычки.

> **Примечание:** В отличие от других языков программирования, в PHP нет команды для объявления переменной. Она создается в тот момент, когда вы впервые присваиваете ей значение.

> Считайте переменные контейнерами для хранения данных.

## Переменные PHP

Переменная может иметь короткое имя (например, `$x` и `$y`) или более описательное (`$age`, `$carname`, `$total_volume`). Правила для переменных PHP:

- Переменная начинается со знака `$`, за которым следует имя переменной.
- Имя переменной должно начинаться с буквы или символа подчеркивания
- Имя переменной не может начинаться с цифры
- Имя переменной может содержать только буквенно-цифровые символы и символы подчеркивания (`A-z`, `0-9` и `_`)
- Имена переменных чувствительны к регистру (`$age` и `$AGE` - это две разные переменные)

> Помните, что имена переменных в PHP чувствительны к регистру!

## Вывод переменных

Оператор PHP `echo` часто используется для вывода данных на экран. В следующем примере показано, как вывести текст и переменную:

```php
$txt = 'W3Schools.com';
echo "I love {$txt}!";
```

> **Примечание переводчика:** далее в учебнике мы будем использовать функцию `print()` вместо оператора `echo`.

В следующем примере будет получен тот же результат, что и в примере выше:

```php
$txt = "W3Schools.com";
print('I love ' . $txt . '!');
```

> **Примечание переводчика:** вышеприведенные примеры включают в себя методы слияния строк: с помощью форматирования строки и с помощью оператора конкатенации (`.`).

В следующем примере будет выведена сумма двух переменных:

```php
$x = 5;
$y = 10;
print($x + $y);
```

## PHP - свободно типизированный язык

В примере выше обратите внимание на то, что нам не нужно указывать PHP, к какому типу данных относится переменная.

PHP автоматически присваивает переменной тип данных в зависимости от ее значения. Поскольку типы данных не заданы в строгом смысле, вы можете делать такие штуки, как добавление строки к целому числу, не вызывая ошибки.

В PHP 7 были добавлены декларации типов. Это дает возможность указывать тип данных, ожидаемый при объявлении функции, а если включить строгое требование, то при несовпадении типов будет вылетать «Фатальная ошибка».

## Типы переменных

В PHP нет команды для объявления типа переменной, и тип данных зависит от значения переменной.

```php
$x = 5; // челочисленное
$z = 3.14; // число с плавающей точкой
$y = 'Hello'; // строка
```

PHP поддерживает следующие типы данных:
- Строка (`string`)
- Целое число (`int`)
- Float (числа с плавающей точкой - также называются double)
- Булевы числа (`boolean`)
- Массив (`array`)
- Объект (`object`)
- NULL
- Ресурс (`resource`)


## Получение типа

Чтобы узнать тип данных переменной, воспользуйтесь функцией `var_dump()`.

```php
$x = 5;
var_dump($x);
```

```php
var_dump(5);
var_dump('John');
var_dump(3.14);
var_dump(true);
var_dump([2, 3, 56]);
var_dump(NULL);
```

## Присвоение строки переменной

Присвоение строки переменной выполняется с помощью имени переменной, за которым следует знак равенства и строка:

```php
$x = 'John';
print($x);
```

## Присвоение нескольких значений

Вы можете присвоить одно и то же значение нескольким переменным в одной строке:

```php
$x = $y = $z = 5;
```

# Типы данных в PHP

Переменные могут хранить данные различных типов, а различные типы данных могут выполнять различные действия.

PHP поддерживает следующие типы данных:
- Строка (`string`)
- Целое число (`int`)
- Float (числа с плавающей точкой - также называются double)
- Булевы числа (`boolean`)
- Массив (`array`)
- Объект (`object`)
- NULL
- Ресурс (`resource`)

## Получение типа

Чтобы узнать тип данных переменной, воспользуйтесь функцией `var_dump()`.

```php
$x = 5;
var_dump($x);
```

## PHP Строка

Строка - это последовательность символов, например, «Hello world!».

Строкой может быть любой текст, заключенный в кавычки. Вы можете использовать одинарные или двойные кавычки:

```php
$x = 'Hello world!';
$y = "Hello world!";

var_dump($x);
print('<br>');
var_dump($y);
```

## PHP Целое число

Целый тип данных - это недесятичное число в диапазоне от -2 147 483 648 до 2 147 483 647.

Правила для целых чисел:
- Целое число должно иметь хотя бы одну цифру.
- Целое число не должно иметь десятичной точки
- Целое число может быть как положительным, так и отрицательным
- Целые числа могут быть заданы в десятичной (основание 10), шестнадцатеричной (основание 16), восьмеричной (основание 8) или двоичной (основание 2) системе счисления.

В следующем примере `$x` - целое число. Функция PHP `var_dump()` возвращает тип и значение данных:

```php
$x = 5985;
var_dump($x);
```

## PHP Float

Флоат (число с плавающей точкой) - это число с десятичной точкой или число в экспоненциальной форме.

В следующем примере `$x` является плавающей точкой. Функция PHP `var_dump()` возвращает тип и значение данных:

```php
$x = 10.365;
var_dump($x);
```

## PHP Булевы числа

Булевое число представляет собой два возможных состояния: `TRUE` или `FALSE`.

```php
$x = true;
var_dump($x);
```

Булевы числа часто используются при условном тестировании.

## Массив PHP

Массив хранит несколько значений в одной переменной.

В следующем примере `$cars` является массивом. Функция PHP `var_dump()` возвращает тип данных и значение:

```php
$cars = ['Volvo', 'BMW', 'Toyota'];
var_dump($cars);
```

Вы узнаете гораздо больше о массивах в последующих главах этого учебника.

## Объект PHP

Классы и объекты - это два основных аспекта объектно-ориентированного программирования.

Класс - это шаблон для объектов, а объект - это экземпляр класса. Когда создаются отдельные объекты, они наследуют все свойства и поведение от класса, но у каждого объекта будут свои значения для свойств.

Допустим, у нас есть класс с именем `Car`, который может иметь такие свойства, как модель, цвет и т. д. Мы можем определить переменные `$model`, `$color` и так далее, чтобы хранить значения этих свойств.

Когда создаются отдельные объекты (Volvo, BMW, Toyota и т. д.), они наследуют все свойства и поведение от класса, но у каждого объекта будут свои значения свойств.

Если вы создадите функцию `__construct()`, PHP будет автоматически вызывать ее при создании объекта из класса.

```php
class Car {
    public $model;
    public $color;

    public function __construct($model, $color) {
        $this->model = $model;
        $this->color = $color;
    }

    public function message() {
        return 'My car is a ' . $this->model . ' and the color is ' . $this->color . '.';
    }
}

$myCar = new Car('Volvo', 'black');
var_dump($myCar);
```

Не волнуйтесь, если вы не понимаете синтаксис классов и объектов PHP.

## Значение NULL в PHP

`Null` - это специальный тип данных, который может иметь только одно значение: `NULL`. Переменная с типом данных `NULL` - это переменная, которой не присвоено никакого значения.

> **Совет:** Если переменная создается без значения, ей автоматически присваивается значение NULL.

Переменные также можно очистить, установив значение `NULL`:

```php
$x = 'Hello world!';
$x = null;
var_dump($x);
```

## Изменение типа данных

Если вы присвоите переменной целое значение, ее тип автоматически станет целым. Если той же переменной присвоить строку, тип изменится на строку:

```php
$x = 5985;
var_dump($x);

$x = 'Test';
var_dump($x);
```

Если вы хотите изменить тип данных существующей переменной, но при этом не менять ее значение, вы можете использовать кастинг. Кастинг позволяет изменять тип данных в переменных:

```php
$x = 5;
$x = (string) $x;
var_dump($x);
```

## Ресурсы PHP

Специальный тип ресурса не является фактическим типом данных. В нем хранятся ссылки на внешние по отношению к PHP функции и ресурсы.

Частым примером использования типа данных resource является вызов базы данных. Здесь мы не будем рассказывать о типе `resource`, так как это достаточно сложная тема.
