# Работа с сессиями и куки

### 1. Работа с куки

#### Установка куки

Добавьте следующий код в файл `index.php`, чтобы установить куки с именем `username` и значением `John Doe`, которое будет сохраняться в течение 1 часа:

```php
<?php

$cookie_name = 'username';
$cookie_value = 'John Doe';

setcookie($cookie_name, $cookie_value, time() + (3600), '/'); // 3600 секунд = 1 час

?>
<!DOCTYPE html>
<html>
	<body>
		<?php
			if (!isset($_COOKIE[$cookie_name])) {
			    print("Куки '{$cookie_name}' не установлены!");
			} else {
			    print("Куки '{$cookie_name}' установлены!<br>");
				print('Значение: ' . $_COOKIE[$cookie_name]);
			}
		?>
	</body>
</html>
```

Обновите  страницу  в  браузере  и  проверьте  вывод.  Убедитесь,  что  куки  устанавливаются  и  отображаются  правильно.

### 2. Работа с сессиями

#### Подготовка файлов

Создайте следующие файлы в вашей рабочей папке:
- `login.php` – для входа пользователя.
- `welcome.php` – для приветствия пользователя после входа.
- `logout.php` – для выхода пользователя.

#### Код файлов

#### `login.php`

Этот файл будет содержать форму для ввода имени пользователя и обработки входа.

```php
<?php

session_start();

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    // Получение имени пользователя из формы
    $username = $_POST['username'];

    // Установка переменной сессии
    $_SESSION['username'] = $username;

    // Перенаправление на страницу приветствия
    header('Location: welcome.php');
    exit();
}

?>

<!DOCTYPE html>
<html>
	<body>
		<h2>Форма входа</h2>
		<form method="post" action="login.php">
			Имя пользователя: <input type="text" name="username" required><br><br>
			<input type="submit" value="Войти">
		</form>
	</body>
</html>
```

#### `welcome.php`

Этот файл будет приветствовать пользователя после входа и предоставлять возможность выхода.

```php
<?php

session_start();

if (!isset($_SESSION['username'])) {
    // Если пользователь не авторизован, перенаправление на страницу входа
    header('Location: login.php');
    exit();
}

?>

<!DOCTYPE html>
<html>
	<body>
		<h2>Добро пожаловать!</h2>
		<p>Привет, <?php print($_SESSION['username']); ?>!</p>
		<a href="logout.php">Выйти</a>
	</body>
</html>
```

#### `logout.php`

Этот файл будет обрабатывать выход пользователя, удаляя сессионные данные и перенаправляя на страницу входа.

```php
<?php

session_start();

// Удаление всех переменных сессии
session_unset();

// Завершение сессии
session_destroy();

// Перенаправление на страницу входа
header('Location: login.php');
exit();
```

## Самостоятельная работа

Самостоятельные работы должны быть созданы в директории `self_study`.

### Работа  с  куками

Для работы с куками, в папке `self_study`, создайте папку `cookies`. В папке каждая работа должна быть выполнена в своём файле с именем `X.php`, где `X` - номер работы.

1.  **Работа  1**:  Создайте  куки  с  именем  `user`  и  значением  `admin`,  которые  будут  действительны  1  день.  Проверьте,  установлены  ли  куки.
2.  **Работа  2**:  Измените  значение  куки  `user`  на  `guest`  и  проверьте  это  изменение.
3.  **Работа  3**:  Создайте  куки  с  именем  `preferences`  и  значением  `dark_mode`,  которое  будет  сохраняться  1  неделю.  Проверьте  и  выведите  это  значение.
4.  **Работа  4**:  Установите  куки  с  именем  `language`  и  значением  `English`  на  срок  2  часа.  Реализуйте  проверку  наличия  куки  и  выведение  значения.
5.  **Работа  5**:  Создайте  страницу,  которая  будет  устанавливать  и  выводить  значение  куки  `visited`,  которая  увеличивает  свое  значение  каждый  раз,  когда  пользователь  посещает  страницу.
6.  **Работа  6**:  Установите  куки  с  именем  `country`  и  значением  `Russia`  и  создайте  страницу,  которая  будет  отображать  приветственное  сообщение  на  основе  этого  значения.
7.  **Работа  7**:  Создайте  куки  с  именем  `theme`  и  значением  `light`,  которое  можно  будет  изменить  через  форму  на  странице  на  значение  `dark`.
8.  **Работа  8**:  Установите  несколько  куки  с  разными  значениями  (например,  `font_size`,  `layout`)  и  выведите  их  все  на  одной  странице.
9.  **Работа  9**:  Создайте  страницу,  которая  будет  проверять  наличие  куки  `loggedin`  и  перенаправлять  пользователя  на  другую  страницу,  если  куки  не  установлены.
10.  **Работа  10**:  Реализуйте  удаление  куки  с  именем  `session_id`  и  проверьте,  что  куки  больше  нет.

### Работы  с  сессиями

Для работы с сессиями, в папке `self_study`, создайте папку `sessions`. В папке каждая работа должна быть выполнена в своей папке с именем `X`, где `X` - номер работы.

1.  **Работа  1**:  Инициализируйте  сессию  и  установите  переменную  сессии  `username`  со  значением  `student`.  Проверьте  наличие  и  выведите  значение  этой  переменной.
2.  **Работа  2**:  Создайте  форму  авторизации,  в  которой  пользователи  будут  вводить  имя  и  пароль.  Сохраните  введенные  данные  в  переменной  сессии  и  перенаправьте  пользователя  на  другую  страницу.
3.  **Работа  3**:  Создайте  страницу  приветствия,  которая  будет  выводить  сообщение  с  именем  пользователя,  сохраненным  в  сессии,  и  предоставьте  возможность  выхода,  удаляя  сессионные  данные.
4.  **Работа  4**:  Создайте  переменную  сессии  `cart`  и  реализуйте  добавление  и  удаление  товаров  из  корзины.  Выведите  содержимое  корзины  на  отдельной  странице.
5.  **Работа  5**:  Инициализируйте  сессию  и  установите  переменные  сессии  `first_visit_time`  и  `last_visit_time`.  Обновите  `last_visit_time`  при  каждом  посещении  страницы  и  выведите  информацию  о  времени  первого  и  последнего  посещений.