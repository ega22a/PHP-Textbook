# Куки

## Что такое файл "cookie"?

> **Примечание переводчика:** в данном разделе и далее мы будем использовать названия "Cookie", "Cookies", "Куки", "Кука" как равнозначные обозначения.

Cookie часто используется для идентификации пользователя. Cookie -- это небольшой файл, который сервер помещает на компьютер пользователя. Каждый раз, когда один и тот же компьютер запрашивает страницу с помощью браузера, он также отправляет cookie. С помощью PHP вы можете как создавать, так и получать значения cookie.

## Создание файлов "cookie"

Cookie создается с помощью функции `setcookie()`.

### Синтаксис

```php
setcookie(name, value, expire, path, domain, secure, httponly);
```

Только параметр `name` является обязательным. Все остальные параметры необязательны.

## Создание/получение файла "cookie"

В следующем примере создается файл "cookie" с именем «`user`» и значением `«John Doe`». Срок действия куки истекает через `30` дней (`86400 * 30`). Символ «`/`» означает, что файл cookie доступен на всем сайте (в противном случае выберите каталог, который вам больше нравится).

> **Примечание переводчика:** время жизни куки задается в секундах. Если время не задано, то кука считается сессионной.

Затем мы получаем значение "cookie" «`user`» (с помощью глобальной переменной `$_COOKIE`). Мы также используем функцию `isset()`, чтобы узнать, установлен ли "cookie":

```php
<?php

$cookie_name = 'user';
$cookie_value = 'John Doe';

setcookie($cookie_name, $cookie_value, time() + (86400 * 30), '/'); // 86400 = 1 день

?>

<html>
    <body>
        <?php
            if (!isset($_COOKIE[$cookie_name])) {
                print("Куки с именем '{$cookie_name}' нет!");
            } else {
                print("Кука с именем '{$cookie_name}' есть!<br>");
                print("Значение в куке: {$_COOKIE[$cookie_name]}");
            }
        ?>
    </body>
</html>
```

> **Примечание переводчика:** никогда не доверяйте и не используйте установку куки на клиенте через JavaScript. Доверьте генерацию кук серверу!

> **Примечание:** функция `setcookie()` должна находиться **ДО** тега `<html>`.

**Примечание:** значение "cookie" автоматически кодируется в URL при отправке "cookie" и автоматически декодируется при получении (чтобы не кодировать URL, используйте вместо этого функцию `setrawcookie()`).

## Изменение значения куки

Чтобы изменить "cookie", просто установите (повторно) "cookie" с помощью функции `setcookie()`:

```php
<?php

$cookie_name = 'user';
$cookie_value = 'Alex Porter';

setcookie($cookie_name, $cookie_value, time() + (86400 * 30), '/');

?>

<html>
    <body>
        <?php
            if (!isset($_COOKIE[$cookie_name])) {
                print("Куки с именем '{$cookie_name}' нет!");
            } else {
                print("Кука с именем '{$cookie_name}' есть!<br>");
                print("Значение куки: {$_COOKIE[$cookie_name]}");
            }
        ?>
    </body>
</html>
```

## Удаление "cookie"
Чтобы удалить "cookie", используйте функцию `setcookie()` с датой истечения срока действия в прошлом:

```php
<?php

// устанавливаем дату истечения срока действия на один час назад
setcookie('user', '', time() - 3600);

?>

<html>
    <body>
        <?php
            print('Кука с именем "user" удалена.');
        ?>
    </body>
</html>
```

## Проверяем, включены ли файлы "cookie"

В следующем примере создается небольшой скрипт, который проверяет, включены ли файлы "cookie". Сначала попробуйте создать тестовый "cookie" с помощью функции `setcookie()`, а затем подсчитайте переменную массива `$_COOKIE`:

```php
<?php

setcookie('test_cookie', 'test', time() + 3600, '/');

?>

<html>
    <body>
        <?php
            if (count($_COOKIE) > 0) {
                print('Куки включены.');
            } else {
                print("Куки выключены.");
            }
        ?>
    </body>
</html>
```

