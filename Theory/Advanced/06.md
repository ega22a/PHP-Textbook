# Сессии

Сессия -- это способ хранения информации (в переменных) для использования на нескольких страницах. В отличие от "cookie", информация не хранится на компьютере пользователя.

## Что такое сессия?

Когда вы работаете с приложением, вы открываете его, делаете некоторые изменения, а затем закрываете. Это очень похоже на сессию. Компьютер знает, кто вы. Он знает, когда вы начали работу с приложением и когда закончили. Но в Интернете есть одна проблема: веб-сервер не знает, кто вы и что вы делаете, потому что HTTP-адрес не сохраняет состояние.

Сессионные переменные решают эту проблему, сохраняя информацию о пользователе для использования на нескольких страницах (например, имя пользователя, любимый цвет и т. д.). По умолчанию сеансовые переменные хранятся до тех пор, пока пользователь не закроет браузер.

Таким образом, переменные сеанса хранят информацию об одном пользователе и доступны для всех страниц одного приложения.

> **Совет:** если вам нужно постоянное хранение, вы можете хранить данные в базе данных.

## Запуск сеанса

Сессия запускается с помощью функции `session_start()`. Переменные сессии задаются с помощью глобальной переменной PHP: `$_SESSION`.

Теперь давайте создадим новую страницу под названием «`demo_session1.php`». На этой странице мы начнем новую сессию PHP и установим некоторые переменные сессии:

```php
<?php

// Стартуем сессию
session_start();

?>

<!DOCTYPE html>
<html>
    <body>
        <?php
            // Устанавливаем сессионные данные
            $_SESSION['favcolor'] = 'green';
            $_SESSION['favanimal'] = 'cat';

            print("Данные сессии установлены.");
        ?>
    </body>
</html>
```

> **Примечание:** функция `session_start()` должна быть самой первой в вашем документе. Перед любыми HTML-тегами.

## Получение значений переменных сеанса

Далее мы создадим еще одну страницу под названием «`demo_session2.php`». На этой странице мы получим доступ к информации о сессии, которую мы установили на первой странице («`demo_session1.php`»).

Обратите внимание, что переменные сессии не передаются отдельно на каждую новую страницу, вместо этого они извлекаются из сессии, которую мы открываем в начале каждой страницы (`session_start()`).

Также обратите внимание, что все значения переменных сессии хранятся в глобальной переменной `$_SESSION`:

```php
<?php session_start(); ?>
<!DOCTYPE html>
<html>
    <body>
        <?php
            // Выводим все данные, которые уставновлены в сессии
            print("Любимый цвет - '{$_SESSION['favcolor']}'.<br>");
            print("Любимое животное - '{$_SESSION['favanimal']}'.");
        ?>
    </body>
</html>
```

Другой способ показать все значения переменных сеанса для пользовательского сеанса - выполнить следующий код:

```php
<?php session_start(); ?>
<!DOCTYPE html>
<html>
    <body>
        <?php print_r($_SESSION); ?>
    </body>
</html>
```

> **Как оно работает? Как оно узнает, что это я?**
> В большинстве сеансов на компьютере пользователя устанавливается ключ пользователя, который выглядит примерно так: `765487cf34ert8dede5a562e4f3a7e12`. Затем, когда сессия открывается на другой странице, она сканирует компьютер на наличие ключа пользователя. Если он совпадает, то открывается доступ к этой сессии, если нет, то начинается новая сессия.

## Изменение переменной сеанса

Чтобы изменить переменную сеанса, просто перезапишите ее:

```php
<?php session_start(); ?>
<!DOCTYPE html>
<html>
    <body>
        <?php
            // Для изменения значения в переменной сессии, просто нужно перезаписать ее
            $_SESSION['favcolor'] = 'yellow';

            print_r($_SESSION);
        ?>
    </body>
</html>
```

## Уничтожение сеанса

Чтобы удалить все глобальные переменные сессии и уничтожить сессию, используйте `session_unset()` и `session_destroy()`:

```php
<?php session_start(); ?>
<!DOCTYPE html>
<html>
    <body>
        <?php
            // Удаляем все значения сессии пользователя
            session_unset();

            // Удаляем сессию пользователя
            session_destroy();
        ?>
    </body>
</html>
```

