# Массивы

Массив хранит несколько значений в одной переменной:

```php
$cars = ['Volvo', 'BMW', 'Toyota'];
```

## Что такое массив?

Массив - это специальная переменная, которая может содержать множество значений под одним именем, и вы можете получить доступ к значениям, обращаясь к номеру индекса или имени.

## Типы массивов в PHP

В PHP существует три типа массивов:

- [Индексированные массивы](#индексированные-массивы) - массивы с числовым индексом
- [Ассоциативные массивы](#ассоциативные-массивы) - массивы с именованными ключами
- (Многомерные массивы)[#многомерные-массивы] - массивы, содержащие один или несколько массивов.

## Работа с массивами

В этом материале вы узнаете, как работать с массивами, в том числе:

- Создание массивов
- Доступ к массивам
- Обновлять массивы
- Добавлять элементы массива
- Удаление элементов массива
- Сортировка массивов

## Элементы массива

Элементы массива могут быть любого типа данных. Наиболее распространенными являются строки и числа (`int`, `float`), но элементами массива могут быть также объекты, функции или даже массивы.

В одном массиве могут находиться данные разных типов.

```php
$mix = ['Volvo', 3.14, 42, true, ['BMW', 'Toyota']];
```

## Функции для работы с массивами

Настоящей силой массивов в PHP являются встроенные функции массивов, например, функция `count()` для подсчета элементов массива:

```php
$cars = ['Volvo', 'BMW', 'Toyota'];
print(count($cars)); // 3
```

## Индексированные массивы

В индексированных массивах каждый элемент имеет индексный номер. По умолчанию первый элемент имеет индекс 0, второй - 1 и т. д.

Чтобы получить доступ к элементу массива, можно обратиться к номеру индекса:

```php
$cars = ['Volvo', 'BMW', 'Toyota'];
print($cars[0]); // Volvo
```

Чтобы изменить значение элемента массива, используйте номер индекса:

```php
$cars = ['Volvo', 'BMW', 'Toyota'];
$cars[0] = 'Ford';

print($cars[0]); // Ford
```

### Цикл по индексированному массиву

Чтобы просмотреть и вывести все значения индексированного массива, можно использовать цикл `foreach`, например, так:

```php
$cars = ['Volvo', 'BMW', 'Toyota'];

foreach ($cars as $car) {
    print($car . '<br>');
}
```

### Номер индекса

Ключ индексированного массива - это число, по умолчанию первый элемент равен 0, второй - 1 и т.д., но есть и исключения. Новые элементы получают следующий номер индекса, то есть на один больше, чем самый высокий существующий индекс.

Таким образом, если у вас есть массив следующего вида:

```php
$cars = ['Volvo', 'BMW', 'Toyota'];
```

И если вы используете функцию `array_push()` для добавления нового элемента, то новый элемент получит индекс 3:

```php
array_push($cars, 'Ford');
```

Но если у вас есть массив со случайными номерами индексов, например, так:

```php
$cars = [3 => 'Volvo', 7 => 'BMW', 10 => 'Toyota'];
```

А если с помощью функции `array_push()` добавить новый элемент, каким будет номер индекса нового элемента?

```php
array_push($cars, 'Ford');
```

### Примечания от переводчика по индексированным массивам

Для добавления элемента в конец массива можно использовать функцию `array_push()`, но также можно использовать квадратные скобки `[]`:

```php
$cars = ['Volvo', 'BMW', 'Toyota'];
$cars[] = 'Ford';
```

Элемент добавится в конец массива и получит индекс последнего элемента плюс один.

## Ассоциативные массивы

Ассоциативные массивы - это массивы, использующие именованные ключи, которые вы им назначаете.

```php
$age = ['Peter' => 35, 'Ben' => 37, 'Joe' => 43];
```

В этом примере `'Peter'`, `'Ben'` и `'Joe'` - это ключи, а `35`, `37` и `43` - это значения.

### Доступ к элементам ассоциативного массива

Чтобы получить доступ к элементу массива, можно обратиться к имени ключа.

```php
$age = ['Peter' => 35, 'Ben' => 37, 'Joe' => 43];

print($age['Ben']); // 37
```

### Изменить значение

Чтобы изменить значение элемента массива, используйте имя ключа:

```php
$age = ['Peter' => 35, 'Ben' => 37, 'Joe' => 43];
$age['Ben'] = 38;

print($age['Ben']); // 38
```

### Цикл по ассоциативному массиву

Чтобы просмотреть и вывести на печать все значения ассоциативного массива, можно использовать цикл `foreach`, например, так:

```php
$age = ['Peter' => 35, 'Ben' => 37, 'Joe' => 43];

foreach ($age as $key => $value) {
    print($key . ': ' . $value . '<br>');
}
```

## Создание массива

Вы можете создавать массивы с помощью функции `array()`:

```php
$cars = array('Volvo', 'BMW', 'Toyota');
```

Или с помощью квадратных скобок `[]`:

```php
$cars = ['Volvo', 'BMW', 'Toyota'];
```

### Несколько строк

Разрывы строк не важны, поэтому объявление массива может занимать несколько строк:

```php
$cars = [
    'Volvo',
    'BMW',
    'Toyota'
];
```

### Запятая в конце

Запятая после последнего элемента допускается:

```php
$cars = [
    'Volvo',
    'BMW',
    'Toyota',
];
```

> **Примечание переводчика:** даже более того, это рекомендуется, так как при добавлении нового элемента в конец массива не нужно будет добавлять запятую в предпоследний элемент.

### Ключи массива

При создании индексированных массивов ключи задаются автоматически, начиная с 0 и увеличиваясь на 1 для каждого элемента, поэтому приведенный выше массив также может быть создан с ключами:

```php
$cars = [
    0 => 'Volvo',
    1 => 'BMW',
    2 => 'Toyota',
];
```

Как видите, индексированные массивы - это то же самое, что и ассоциативные массивы, но в ассоциативных массивах вместо чисел есть имена:

```php
$cars = [
    'brand' => 'Volvo',
    'model' => 'XC90',
    'year' => 2021,
];
```

### Объявление пустого массива

Вы можете сначала объявить пустой массив, а затем добавить в него элементы:

```php
$cars = [];

$cars[] = 'Volvo';
$cars[] = 'BMW';
$cars[] = 'Toyota';
```

То же самое относится и к ассоциативным массивам: вы можете сначала объявить массив, а затем добавить в него элементы:

```php
$age = [];

$age['Peter'] = 35;
$age['Ben'] = 37;
$age['Joe'] = 43;
```

### Смешивание ключей массива

Вы можете иметь массивы как с индексированными, так и с именованными ключами:

```php
$cars = [
    'Volvo',
    'BMW',
    'Toyota',
    'brand' => 'Volvo',
    'model' => 'XC90',
    'year' => 2021,
];
```

> **Примечание переводчика:** создавать массивы с одновременным использованием индексированных и ассоциативных ключей не рекомендуется, так как это может привести к ошибкам в коде и в его понимании.

## Доступ к элементу массива

Чтобы получить доступ к элементу массива, вы можете ссылаться на номер индекса для индексированных массивов и на имя ключа для ассоциативных массивов.

```php
$cars = ['Volvo', 'BMW', 'Toyota'];

print($cars[0]); // Volvo
```

> **Примечание:** первый элемент имеет индекс 0.

Чтобы получить доступ к элементам **ассоциативного массива**, используйте имя ключа:

```php
$age = ['Peter' => 35, 'Ben' => 37, 'Joe' => 43];

print($age['Ben']); // 37
```

### Выполнение элемента функции

Элементы массива могут иметь любой тип данных, включая функцию. Чтобы выполнить такую функцию, используйте номер индекса, за которым следуют круглые скобки `()`:

```php
function hello() {
    return 'Hello, World!';
}

$array = [
    'raw_text' => 'Hello, World!',
    'function' => hello,
];

print($array['function']()); // Hello, World!
```

## Сортировка массивов

Элементы массива могут быть отсортированы в алфавитном или числовом порядке, по убыванию или по возрастанию.

### Функции сортировки массивов

- `sort()` - сортировка массивов в порядке возрастания
- `rsort()` - сортировка массивов по убыванию
- `asort()` - сортировка ассоциативных массивов в порядке возрастания, в соответствии со значением
- `ksort()` - сортировка ассоциативных массивов по возрастанию в соответствии с ключом
- `arsort()` - сортировать ассоциативные массивы по убыванию, в соответствии со значением
- `krsort()` - сортировать ассоциативные массивы по убыванию в соответствии с ключом

### Сортировка индексированных массивов

```php
$cars = ['Volvo', 'BMW', 'Toyota'];
sort($cars); // сортировка в порядке возрастания

print_r($cars);
```

## Многомерные массивы

На предыдущих страницах мы описали массивы, представляющие собой единый список пар ключ/значение. Однако иногда требуется хранить значения с более чем одним ключом. Для этого существуют многомерные массивы.

Многомерный массив - это массив, содержащий один или несколько массивов. PHP поддерживает многомерные массивы глубиной в два, три, четыре, пять и более уровней. Однако массивы глубиной более трех уровней сложны в управлении для большинства людей.

> **Размерность массива указывает на количество индексов, необходимых для выбора элемента.**
> - Для двумерного массива вам потребуется два индекса, чтобы выбрать элемент.
> - Для трехмерного массива необходимо три индекса для выбора элемента

### Двумерные массивы

Двумерный массив - это массив массивов (трехмерный массив - массив массивов массивов). Для начала взгляните на следующую таблицу:

| Имя | Возраст | Город |
| --- | --- | --- |
| Peter | 35 | New York |
| Ben | 37 | Boston |
| Joe | 43 | Chicago |

Мы можем хранить данные из приведенной выше таблицы в двумерном массиве, например, так:

```php
$people = [
    ['Peter', 35, 'New York'],
    ['Ben', 37, 'Boston'],
    ['Joe', 43, 'Chicago'],
];
```

Теперь двумерный массив `$people` содержит четыре массива, и у него есть два индекса: `row` и `column`. Чтобы получить доступ к элементам массива `$people`, мы должны указать на два индекса (`row` и `column`):

```php
$people = [
    ['Peter', 35, 'New York'],
    ['Ben', 37, 'Boston'],
    ['Joe', 43, 'Chicago'],
];

print($people[0][0]); // Peter
print($people[1][2]); // Boston
```

Мы также можем поместить цикл `for` внутри другого цикла `for`, чтобы получить элементы массива `$people` (нам все равно придется указать на два индекса):

```php
$people = [
    ['Peter', 35, 'New York'],
    ['Ben', 37, 'Boston'],
    ['Joe', 43, 'Chicago'],
];

for ($row = 0; $row < 3; $row++) {
    print('<p><b>Row number ' . $row . '</b></p>');
    print('<ul>');

    for ($col = 0; $col < 3; $col++) {
        print('<li>' . $people[$row][$col] . '</li>');
    }

    print('</ul>');
}
```

## Функции для работы с массивами

В PHP есть набор встроенных функций, которые можно использовать для работы с массивами.

| Функция | Описание |
| --- | --- |
| `array()` | Создает массив |
| `count()` | Возвращает количество элементов в массиве |
| `sort()` | Сортирует массив в порядке возрастания |
| `rsort()` | Сортирует массив в порядке убывания |
| `asort()` | Сортирует ассоциативный массив в порядке возрастания, в соответствии со значением |
| `ksort()` | Сортирует ассоциативный массив в порядке возрастания, в соответствии с ключом |
| `arsort()` | Сортирует ассоциативный массив в порядке убывания, в соответствии со значением |
| `krsort()` | Сортирует ассоциативный массив в порядке убывания, в соответствии с ключом |
| `array_push()` | Добавляет один или несколько элементов в конец массива |
| `array_pop()` | Удаляет последний элемент массива |
| `array_shift()` | Удаляет первый элемент массива |
| `array_unshift()` | Добавляет один или несколько элементов в начало массива |
| `array_merge()` | Объединяет один или несколько массивов |
| `array_sum()` | Возвращает сумму всех значений массива |
| `array_unique()` | Удаляет повторяющиеся значения из массива |
| `array_values()` | Возвращает все значения массива |
| `array_keys()` | Возвращает все ключи массива |
| `array_key_exists()` | Проверяет, существует ли указанный ключ в массиве |
| `in_array()` | Проверяет, содержит ли массив указанное значение |
| `array_search()` | Ищет значение в массиве и возвращает ключ, если найдено |
| `array_reverse()` | Переворачивает массив |
| `array_slice()` | Возвращает выбранную часть массива |
| `array_splice()` | Удаляет и заменяет элементы массива |
| `array_rand()` | Возвращает случайный ключ из массива |
| `shuffle()` | Перемешивает массив |
| `array_fill()` | Заполняет массив значениями |
| `array_filter()` | Фильтрует значения массива с помощью функции обратного вызова |
| `array_map()` | Применяет функцию обратного вызова ко всем элементам массива |
| `array_reduce()` | Объединяет элементы массива в одно значение с помощью функции обратного вызова |
| `array_walk()` | Применяет функцию обратного вызова ко всем элементам массива |
| `array_change_key_case()` | Меняет регистр всех ключей массива |
| `array_chunk()` | Разбивает массив на части |
| `array_column()` | Возвращает значения одного столбца из многомерного массива |
| `array_combine()` | Создает массив, используя один массив в качестве ключей, а другой - в качестве значений |
| `array_diff()` | Сравнивает массивы и возвращает различия |
| `array_diff_assoc()` | Сравнивает массивы с дополнительной проверкой ключей |
| `array_diff_key()` | Сравнивает ключи массивов и возвращает различия |
| `array_diff_uassoc()` | Сравнивает массивы с дополнительной проверкой ключей с использованием пользовательской функции для сравнения |
| `array_diff_ukey()` | Сравнивает ключи массивов с использованием пользовательской функции для сравнения и возвращает различия |

Полный список функций можно найти на [официальном сайте PHP](https://www.php.net/manual/en/ref.array.php).