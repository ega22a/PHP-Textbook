# Суперглобальные пемеренные

Суперглобальные переменные появились в PHP 4.1.0 и представляют собой встроенные переменные, которые всегда доступны во всех диапазонах.

Некоторые предопределенные переменные в PHP являются «суперглобальными», что означает, что они всегда доступны, независимо от области видимости - и вы можете обращаться к ним из любой функции, класса или файла, не делая ничего особенного.

К суперглобальным переменным PHP относятся:

- `$GLOBALS` - используется для доступа к глобальным переменным из любой местности скрипта
- `$_SERVER` - содержит информацию о заголовках, путях и местоположениях скрипта
- `$_REQUEST` - используется для сбора данных после отправки HTML-формы
- `$_POST` - используется для сбора данных после отправки HTML-формы с методом POST
- `$_GET` - используется для сбора данных после отправки HTML-формы с методом GET
- `$_FILES` - используется для загрузки файлов
- `$_ENV` - используется для доступа к переменным среды
- `$_COOKIE` - используется для доступа к кукам
- `$_SESSION` - используется для доступа к сессии

## `$GLOBALS`

`$GLOBALS` - это массив, содержащий все глобальные переменные. Глобальные переменные - это переменные, к которым можно обращаться из любой области видимости.

Переменные самой внешней области видимости автоматически являются глобальными переменными и могут использоваться в любой области видимости, например, внутри функции.

Чтобы использовать глобальную переменную внутри функции, необходимо либо определить ее как глобальную с помощью ключевого слова `global`, либо сослаться на нее с помощью синтаксиса `$GLOBALS`.

```php
<?php

$x = 5;
$y = 10;

function myFunction() {
    $GLOBALS['z'] = $GLOBALS['x'] + $GLOBALS['y'];
}

myFunction();
print($z); // 15
```

Это отличается от других языков программирования, где глобальные переменные доступны без специального указания на то, что они глобальные. Вы также можете ссылаться на глобальные переменные внутри функций, определяя их как глобальные с помощью ключевого слова `global`.

```php
<?php

$x = 5;
$y = 10;

function myFunction() {
    global $x, $y, $z;
    $z = $x + $y;
}

myFunction();
print($z); // 15
```

## `$_SERVER`

`$_SERVER` - это массив, содержащий информацию о заголовках, путях и местоположениях скрипта. Этот массив содержит информацию, созданную веб-сервером. Например, `$_SERVER['PHP_SELF']` содержит имя текущего скрипта.

```php
<?php

echo $_SERVER['PHP_SELF']; // /index.php
```

В следующей таблице перечислены наиболее важные элементы, которые могут находиться внутри `$_SERVER`:

| Элемент массива `$_SERVER` | Описание |
| --- | --- |
| `$_SERVER['PHP_SELF']` | Имя текущего скрипта |
| `$_SERVER['SERVER_NAME']` | Имя хоста сервера, на котором выполняется текущий скрипт |
| `$_SERVER['HTTP_HOST']` | Имя хоста сервера, на котором выполняется текущий скрипт |
| `$_SERVER['HTTP_USER_AGENT']` | Строка, содержащая информацию о браузере пользователя |
| `$_SERVER['SCRIPT_NAME']` | Путь к текущему скрипту |
| `$_SERVER['SERVER_ADDR']` | IP-адрес сервера |
| `$_SERVER['REQUEST_METHOD']` | Метод запроса, используемый для доступа к странице (например, 'GET', 'POST', 'HEAD', 'PUT') |
| `$_SERVER['QUERY_STRING']` | Строка запроса, если она есть |
| `$_SERVER['HTTP_REFERER']` | URL страницы, с которой пользователь перешел на текущую страницу |
| `$_SERVER['REMOTE_ADDR']` | IP-адрес пользователя |
| `$_SERVER['REQUEST_URI']` | URI, который был предоставлен для доступа к этой странице |
| `$_SERVER['SCRIPT_FILENAME']` | Абсолютный путь к текущему скрипту |
| `$_SERVER['SERVER_PORT']` | Порт сервера |
| `$_SERVER['HTTPS']` | Установлено ли соединение через HTTPS |
| `$_SERVER['REMOTE_PORT']` | Порт пользователя |
| `$_SERVER['SERVER_PROTOCOL']` | Имя и версия протокола, используемого в запросе |
| `$_SERVER['REQUEST_TIME']` | Время начала запроса |

## `$_REQUEST`

`$_REQUEST` - это суперглобальная переменная PHP, которая содержит данные отправленной формы и все данные `cookie`. Другими словами, `$_REQUEST` - это массив, содержащий данные из `$_GET`, `$_POST` и `$_COOKIE`.

Вы можете получить доступ к этим данным с помощью ключевого слова `$_REQUEST`, за которым следует имя поля формы или `cookie`, например, так:

```php
<?php

print($_REQUEST['name']);
```

### Использование `$_REQUEST` для `$_POST`-запросов

POST-запросы обычно представляют собой данные, отправленные из HTML-формы. Вот пример того, как может выглядеть HTML-форма:

```html
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <input type="text" name="name">
    <input type="submit">
</form>
```

После отправки формы данные будут доступны в массиве `$_POST`:

```php
<?php

print($_POST['name']);
```

В приведенном ниже примере мы поместили HTML-форму и PHP-код в один и тот же PHP-файл. Мы также добавили несколько дополнительных строк для безопасности.

```php
<?php

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $name = $_POST['name'];
    print($name);
}

?>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <input type="text" name="name">
    <input type="submit">
</form>
```

### Использование `$_REQUEST` для запросов `$_GET`

GET-запросы могут представлять собой отправку формы, как в примере выше, с атрибутом `method` элемента HTML `<form>`, установленным на `GET`. GET-запросы также могут быть данными из строки запроса (информация, добавляемая после адреса URL). Вот пример того, как может выглядеть гиперссылка HTML со строкой запроса:

```html
<a href="index.php?name=John">Click here</a>
```

После нажатия на ссылку данные будут доступны в массиве `$_GET`:

```php
<?php

echo $_GET['name'];
```

В приведенном ниже примере мы поместили HTML-форму и PHP-код в один и тот же PHP-файл. Мы также добавили несколько дополнительных строк для безопасности.

```php
<?php

if ($_SERVER['REQUEST_METHOD'] == 'GET') {
    $name = $_GET['name'];
    print($name);
}

?>

<form method="get" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <input type="text" name="name">
    <input type="submit">
</form>
```

## `$_POST`

`$_POST` - это суперглобальная переменная PHP, которая используется для сбора данных после отправки HTML-формы с методом POST. Существует два основных способа отправки переменных с помощью метода HTTP `Post`:

- HTML-формы
- HTTP-запросы JavaScript

### `$_POST` в HTML-формах

HTML-форма отправляет информацию методом HTTP POST, если атрибут `method` формы имеет значение «`POST`». Чтобы продемонстрировать это, мы начнем с создания простой HTML-формы:

```php
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <input type="text" name="name">
    <input type="submit">
</form>

<?php

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $name = $_POST['name'];
    print($name);
}

?>
```

Когда пользователь нажимает кнопку `submit`, данные формы отправляются в PHP-файл, указанный в атрибуте `action` тега `<form>`. В файле действия мы можем использовать переменную `$_POST` для сбора значения поля ввода.

### `$_POST` в HTTP-запросах JavaScript

При отправке HTTP-запроса в JavaScript вы можете указать, что метод HTTP - POST. Чтобы продемонстрировать это, начнем с создания функции JavaScript, содержащей HTTP-запрос:

```javascript
function postData() {
    var xhr = new XMLHttpRequest();
    xhr.open('POST', 'index.php', true);
    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    xhr.send('name=John');
}
```

В этом примере мы отправляем POST-запрос на PHP-файл `index.php` с параметром `name=John`. В PHP-файле мы можем использовать переменную `$_POST` для сбора значения параметра.

```php
<?php

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $name = $_POST['name'];
    print($name);
}

?>
```

## `$_GET`

`$_GET` содержит массив переменных, полученных с помощью метода HTTP GET. Существует два основных способа отправки переменных через метод HTTP GET:

- Строки запросов в URL
- HTML-формы

### Строка запроса в URL

Строка запроса - это данные, добавляемые в конец URL-адреса. В приведенной ниже ссылке все, что находится после знака `?`, является частью строки запроса:

```
index.php?name=John&age=25
```

В этом примере `name` и `age` - это переменные, а `John` и `25` - их значения. В PHP-файле мы можем использовать переменную `$_GET` для сбора значений переменных.

```php
<?php

print($_GET['name']);

?>
```

### `$_GET` в HTML-формах

HTML-форма отправляет информацию по методу HTTP GET, если атрибут `method` формы имеет значение «`GET`». Чтобы продемонстрировать это, мы начнем с создания простой HTML-формы:

```php
<form method="get" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <input type="text" name="name">
    <input type="submit">
</form>

<?php

if ($_SERVER['REQUEST_METHOD'] == 'GET') {
    $name = $_GET['name'];
    print($name);
}

?>
```