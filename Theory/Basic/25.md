# Регулярные выражения

Регулярное выражение — это последовательность символов, образующая шаблон поиска. Когда вы ищете данные в тексте, вы можете использовать этот шаблон поиска, чтобы описать то, что вы ищете.

Регулярное выражение может представлять собой один символ или более сложный шаблон. Регулярные выражения можно использовать для выполнения всех типов операций текстового поиска и замены текста.

## Синтаксис

В PHP регулярные выражения представляют собой строки, состоящие из разделителей, шаблонов и необязательных модификаторов.

```php
$exp = '/w3schools/i';
```

В приведенном выше примере `/` — это разделитель, `w3schools` — это шаблон, по которому осуществляется поиск, а `i` — модификатор, делающий поиск нечувствительным к регистру. Разделителем может быть любой символ, кроме буквы, цифры, обратной косой черты или пробела. Наиболее распространенным разделителем является косая черта (`/`), но если шаблон содержит косую черту, удобно выбрать другие разделители, например `#` или `~`.

## Функции регулярных выражений

PHP предоставляет множество функций, позволяющих использовать регулярные выражения. Наиболее распространенными функциями являются:

| Функция | Описание |
|---------|----------|
| `preg_match()` | Выполняет поиск совпадений в строке. Если совпадение найдено, функция возвращает `true`, иначе — `false`. |
| `preg_match_all()` | Выполняет глобальный поиск совпадений в строке. Возвращает количество совпадений. |
| `preg_replace()` | Выполняет поиск и замену совпадений в строке. |

### Использование `preg_match()`

Функция `preg_match()` сообщит вам, содержит ли строка совпадения с шаблоном.

```php
$exp = '/w3schools/i';
$str = 'Visit W3Schools';

if (preg_match($exp, $str)) {
  echo 'Совпадение найдено!';
} else {
  echo 'Совпадение не найдено.';
}
```

### Использование `preg_match_all()`

Функция `preg_match_all()` сообщит вам, сколько совпадений было найдено для шаблона в строке.

```php
$exp = '/w3schools/i';
$str = 'Visit W3Schools';

print(preg_match_all($exp, $str)); // 1
```

### Использование `preg_replace()`

Функция `preg_replace()` заменит все совпадения шаблона в строке другой строкой.

```php
$exp = '/w3schools/i';
$str = 'Visit W3Schools';

print(preg_replace($exp, 'W3Schools', $str)); // Visit W3Schools
```

## Модификаторы регулярных выражений

Модификаторы могут изменить способ выполнения поиска.

| Модификатор | Описание |
|-------------|----------|
| `i` | Сделает поиск регистронезависимым. |
| `m` | Позволяет поиску начинаться с начала каждой строки. |
| `u` | Позволяет поиску работать с данными в кодировке UTF-8. |

## Шаблоны регулярных выражений

Скобки используются для поиска диапазона символов:

| Шаблон | Описание |
|--------|----------|
| `[abc]` | Найдет любой из символов `a`, `b` или `c`. |
| `[a-z]` | Найдет любой символ в диапазоне от `a` до `z`. |
| `[^abc]` | Найдет любой символ, кроме `a`, `b` или `c`. |
| `[0-9]` | Найдет любую цифру от `0` до `9`. |
| `[a-zA-Z]` | Найдет любую букву в верхнем или нижнем регистре. |

## Метасимволы регулярных выражений

Метасимволы — это символы, которые имеют специальное значение в регулярных выражениях.

| Метасимвол | Описание |
|------------|----------|
| `.` | Найдет один любой символ, кроме новой строки. |
| `^` | Найдет совпадение в начале строки. |
| `$` | Найдет совпадение в конце строки. |
| `\d` | Найдет цифру. |
| `\s` | Найдет пробел. |
| `\w` | Найдет любой алфавитно-цифровой символ. |
| `\b` | Найдет границу слова. |
| `|` | Найдет один из нескольких шаблонов. |
| `\D` | Найдет любой символ, кроме цифры. |
| `\S` | Найдет любой символ, кроме пробела. |
| `\W` | Найдет любой символ, кроме алфавитно-цифрового. |
| `\uxxxx` | Найдет символ с шестнадцатеричным значением `xxxx`. |

## Кванторы

Кванторы определяют количества:

| Квантор | Описание |
|---------|----------|
| `n+` | Найдет один или более символов `n`. |
| `n*` | Найдет ноль или более символов `n`. |
| `n?` | Найдет ноль или один символ `n`. |
| `n{X}` | Найдет `X` количество символов `n`. |
| `n{X,Y}` | Найдет от `X` до `Y` символов `n`. |
| `n{X,}` | Найдет `X` или более символов `n`. |

> **Примечание:** если вашему выражению требуется найти один из специальных символов, вы можете использовать обратную косую черту (`\`), чтобы экранировать его. Например, для поиска одного или нескольких вопросительных знаков можно использовать следующее выражение: `$pattern = '/\?+/'`;

## Группировка

Вы можете использовать круглые скобки `( )`, чтобы применять квантификаторы ко всем шаблонам. Их также можно использовать для выбора частей шаблона, которые будут использоваться в качестве совпадения.

```php
$str = 'Visit W3Schools';
$pattern = '/(w3schools)/i';

if (preg_match($pattern, $str, $matches)) {
  echo 'Совпадение найдено!';
  print_r($matches);
} else {
  echo 'Совпадение не найдено.';
}
```