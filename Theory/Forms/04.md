# Проверка электронной почты и URL-адреса

## Проверка имени

В приведенном ниже коде показан простой способ проверить, содержит ли поле name только буквы, тире, апострофы и пробелы. Если значение поля name не является допустимым, то сохраните сообщение об ошибке:

```php
$name = test_input($_POST['name']);

if (!preg_match("/^[a-zA-Z-' ]*$/", $name)) {
  $nameErr = 'Только буквы и пробелы разрешены';
}
```

> **Функция `preg_match()` ищет в строке образец, возвращая `true`, если образец существует, и `false` в противном случае.**

## Проверка правильности электронной почты

Самый простой и безопасный способ проверить, правильно ли сформирован адрес электронной почты, - использовать функцию PHP `filter_var()`. В приведенном ниже коде, если адрес электронной почты не является правильно сформированным, то сохраняется сообщение об ошибке:

```php
$email = test_input($_POST['email']);

if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
  $emailErr = 'Неверный формат email';
}
```

## Проверка правильности URL

В приведенном ниже коде показан способ проверки правильности синтаксиса адреса URL (это регулярное выражение также допускает наличие тире в URL). Если синтаксис адреса URL не является правильным, то сохраняется сообщение об ошибке:

```php
$website = test_input($_POST['website']);

if (!preg_match("/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&@#\/%?=~_|!:,.;]*[-a-z0-9+&@#\/%=~_|]/i", $website)) {
  $websiteErr = 'Неверный URL';
}
```

## Проверка имени, электронной почты и URL

Теперь сценарий выглядит следующим образом:

```php
$name = $email = $website = '';
$nameErr = $emailErr = $websiteErr = '';

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
  if (empty($_POST['name'])) {
    $nameErr = 'Имя обязательно';
  } else {
    $name = test_input($_POST['name']);
    if (!preg_match("/^[a-zA-Z-' ]*$/", $name)) {
      $nameErr = 'Только буквы и пробелы разрешены';
    }
  }

  if (empty($_POST['email'])) {
    $emailErr = 'E-mail обязателен';
  } else {
    $email = test_input($_POST['email']);
    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
      $emailErr = 'Неверный формат email';
    }
  }

  if (empty($_POST['website'])) {
    $website = '';
  } else {
    $website = test_input($_POST['website']);
    if (!preg_match("/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&@#\/%?=~_|!:,.;]*[-a-z0-9+&@#\/%=~_|]/i", $website)) {
      $websiteErr = 'Неверный URL';
    }
  }
}
```

Следующий шаг - показать, как предотвратить опустошение всех полей ввода при отправке формы пользователем.